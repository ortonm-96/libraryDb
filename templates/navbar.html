<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container-fluid">

      <a class="navbar-brand" href="/libraryDb/index.php">Library DB</a>

      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
      </button>

    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">

      <form permissionlevel="1" class="d-flex my-auto mx-2" action="resultsPage.php" method="get">
        <input class="form-control" type="search" placeholder="Search by ISBN" aria-label="Search" name="isbn">
        <input type="hidden" name="table" value="books">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>

      <form permissionlevel="3"class="d-flex my-auto mx-2" action="resultsPage.php" method="get">
        <input class="form-control" type="search" placeholder="Search by ISBN" aria-label="Search" name="isbn">
        <input type="hidden" name="table" value="books">
        <button class="btn btn-outline-success" type="submit">Search</button>
      </form>

      <div class="navbar-nav">
        <!--Navbar items sorted by user permission level. Staff need to see different items to users. Elements each role shouldn't see are filtered out at permissionBuffer_tail.
            I haven't yet added a way for an element to have multiple permisson levels, so items that should be visible to more than one role (Advanced search) need to be declared twice. Later versions will fix this.
         -->
        <a permissionlevel="1" class="nav-link btn btn-light" href="/libraryDb/createItem.php">Create item</a>
        <a permissionlevel="1" class="nav-link btn btn-light" href="/libraryDb/search_isbn.php">Advanced search</a>
        <a permissionlevel="1" class="nav-link btn btn-light" href="/libraryDb/view_loaned_books.php">View books on loan</a>
        <a permissionlevel="1" class="nav-link btn btn-light" href="/libraryDb/view_overdue_books.php">View overdue books</a>
        <a permissionlevel="1" class="nav-link btn btn-light" href="/libraryDb/listUsers.php">List users</a>

        <a permissionlevel="3" class="nav-link btn btn-light" href="/libraryDb/search_isbn.php">Advanced search</a>
        <a permissionlevel="3" class="nav-link btn btn-light" href="/libraryDb/view_loaned_books_currentUser.php">My books on loan</a>
        <a permissionlevel="3" class="nav-link btn btn-light" href="/libraryDb/view_overdue_books_currentUser.php">My overdue books</a>
        <!--
        <?php 
          //require "functions/displayRecord.php";
          require "{$_SERVER["DOCUMENT_ROOT"]}/libraryDb/functions/displayRecord.php";
          echo generateNavbarItems();
        ?>
        -->
      </div>

     <a class="nav-link btn btn-danger mx-2" href="/libraryDb/sessionTest/logout.php">Logout</a>
     <!-- If a user is logged in, show them the link to their page. Otherwise, display a "not logged in" message -->
     <?php 
      if (isset($_SESSION["userId"])){
        echo "<a class='btn btn-light' href='/librarydb/recordPage.php?table=users&user_id={$_SESSION['userId']}'>My profile</a>";
      } else{
        echo "<span class='navbar-text'>Not logged in</span>";
      }
     ?>

    </div>

  </div>
</nav>
